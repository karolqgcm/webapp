
var Clock = function(ts){

    var date, hour, min, sec, times;
    var time = Date.now();
    var al = {
        secs:0,
        mins:0,
        hours:0
    };
    var alarms = [];

    return{
        time:function(){
            date = new Date();
            hour = date.getHours();
            min = date.getMinutes();
            sec = date.getSeconds();

        },
        addAlarm: function(alHour, alMin, alSec){
            var new_al = Object.create(al);
            new_al.secs = alHour;
            new_al.mins = alMin;
            new_al.hours = alSec;
            alarms.push(new_al);
        },
        showTime:function()
        {
            console.log(hour,min,sec);
        },
        timestep:function(ts){
            times = ts;
        },
        alarm:function(alH,alM,alS){
            console.log("Beep!");
        },
        /**alarms:function(alarmes){

            for(k = 0;k<alarmes.length;k++){
                this.addAlarm(alarmes[k]);
            }
        },*/
        tick:function(){
            sec+=ts/1000;
            if(sec>=60){
                sec=sec % 60;

                min++;
                if(min >=60){
                    min = 0;
                    hour++;
                    if(hour >= 24) {
                        hour = 0;
                    }
                }
            }


            for(var i = 0;i<alarms.length;i++){

                if(hour === alarms[i].hour &&
                    min === alarms[i].min
                    && (sec=== alarms[i].sec)){
                    this.alarm(alarms[i].hour,alarms[i].min,alarms[i].sec);
                }

            }
            console.log("Updating time: ")
            this.showTime();

        }
    };
};

var clock1 = new Clock(1000);
clock1.addAlarm(15,45,20);
clock1.time();
setInterval(function() {
   clock1.tick();
}, 2000);

